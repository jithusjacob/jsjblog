<!doctype html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script type="text/javascript" src="/js/custom.js" defer></script>
  </head>
  <body>
    <div class="menu_icon_box" onclick="toggleSideBar(this)">
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
    </div>
    <div class="wrapper">
      <div class="header">
        <h3 class="header_heading">Notes</h3>
      </div>

      <aside class="sidebar">
  <nav>
    <h3 class="sidebar_heading">Note Books</h3>

    
    
      
      
        
          
        

      
        
          
        

      
        
          
        

      
        
          
        

      
        
          
        

      
        
          
        

      
        
          
        

      
        
          
        

      
      
      
    

    
      <ul class="books">
        <li>
          <a
            data-level-id="programming"
            data-level-class="books"
            onclick="downLevel(this)"
            href="#!">
            Programming
          </a>
        </li>
      </ul>
      <ul class="sections" id="programming">
        <li>
          <a
            href="#!"
            data-parent-class="books"
            data-level-class="sections"
            onclick="upLevel(this)"
            >&lt;&lt;</a
          >
        </li>
        
          


          <li>
            <a
              data-level-id="flutterprogramming"
              data-level-class="sections"
              onclick="downLevel(this)"
              href="#!"
              >Flutter</a
            >
          </li>
        
          


          <li>
            <a
              data-level-id="vimprogramming"
              data-level-class="sections"
              onclick="downLevel(this)"
              href="#!"
              >Vim</a
            >
          </li>
        
          


          <li>
            <a
              data-level-id="Gitprogramming"
              data-level-class="sections"
              onclick="downLevel(this)"
              href="#!"
              >Git</a
            >
          </li>
        
          


          <li>
            <a
              data-level-id="hugoprogramming"
              data-level-class="sections"
              onclick="downLevel(this)"
              href="#!"
              >Hugo</a
            >
          </li>
        

      </ul>
    

    
      
        
        <ul class="pages" id="flutterprogramming">
          <li>
            <a
              href="#!"
              data-parent-id="programming"
              data-level-class="pages"
              onclick="upLevel2(this)"
              >&lt;&lt;</a
            >
          </li>
          
            
              
                
                  <li>
                    <a
                      data-level-id="Flutter theme and responsive UI"
                      href="/pages/flutter_theme_responsive_ui/"
                      >Flutter theme and responsive UI</a
                    >
                  </li>
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Fluter IDE with Neovim 0.5 ,built in LSP and lua on windows"
                      href="/pages/fluter_ide_with_lua_lsp_neovim_0.5/"
                      >Fluter IDE with Neovim 0.5 ,built in LSP and lua on windows</a
                    >
                  </li>
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Setup Vim as a Flutter IDE using coc-nvim on windows"
                      href="/pages/vim_flutter_ide/"
                      >Setup Vim as a Flutter IDE using coc-nvim on windows</a
                    >
                  </li>
                
              
            
              
                
              
            
              
                
              
            

          

        </ul>
      
        
        <ul class="pages" id="vimprogramming">
          <li>
            <a
              href="#!"
              data-parent-id="programming"
              data-level-class="pages"
              onclick="upLevel2(this)"
              >&lt;&lt;</a
            >
          </li>
          
            
              
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Creating Vim binding for checkbox using regex for lua configuration"
                      href="/pages/vim_checkbox_lua/"
                      >Creating Vim binding for checkbox using regex for lua configuration</a
                    >
                  </li>
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Vim folding to arrange NeoVim config file"
                      href="/pages/vim_folding/"
                      >Vim folding to arrange NeoVim config file</a
                    >
                  </li>
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Install Neovim on Windows"
                      href="/pages/neovim_install/"
                      >Install Neovim on Windows</a
                    >
                  </li>
                
              
            
              
                
              
            

          

        </ul>
      
        
        <ul class="pages" id="Gitprogramming">
          <li>
            <a
              href="#!"
              data-parent-id="programming"
              data-level-class="pages"
              onclick="upLevel2(this)"
              >&lt;&lt;</a
            >
          </li>
          
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Storing Dotfiles on git repository using git orphan branches"
                      href="/pages/dotfiles_using_git_orphan_branches/"
                      >Storing Dotfiles on git repository using git orphan branches</a
                    >
                  </li>
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            

          

        </ul>
      
        
        <ul class="pages" id="hugoprogramming">
          <li>
            <a
              href="#!"
              data-parent-id="programming"
              data-level-class="pages"
              onclick="upLevel2(this)"
              >&lt;&lt;</a
            >
          </li>
          
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
                  <li>
                    <a
                      data-level-id="Hugo with Git Hub Pages on Windows"
                      href="/pages/hugo_githubpages_window/"
                      >Hugo with Git Hub Pages on Windows</a
                    >
                  </li>
                
              
            

          

        </ul>
      
    

  </nav>
</aside>

      <main class="content">
        
  <h2>Flutter theme and responsive UI</h2>
  <span class="date">
    30 Aug 2021
  </span>
  <h2 id="introduction">Introduction</h2>
<p>In the flutter application I am creating I need a single place where the app
theme can be added which will reflect in the whole application.This includes
color,font size and other look and feel elements.This is so if any changes are
required in the UI. It can be easily done at a single place.Also the text size
and position of other elements should be dynamic based on the screen size for a
responsive UI.Below is a somewhat solution.Its not perfect but fine for my
needs.</p>
<h2 id="flutter-themes">Flutter Themes</h2>
<p>Flutter has a option to use Theme option in Material App to share a theme across
the entire app.As such if no themes are provided flutter creates a default theme
for you.It has themes for most of the widgets , color and font style for text
used in different widgets and a lot of more options.</p>
<p>So I have created a app_theme.dart file to be used for my application.</p>
<pre tabindex="0"><code>import &#39;package:flutter/material.dart&#39;;

/// Single place for color,size,font theme for the app
class AppTheme {
  /// base theme to be used for the whole app
  static final ThemeData baseTheme = ThemeData(
    textTheme: const TextTheme(
      /// summary Headings
      bodyText1: TextStyle(
          color: Colors.blueGrey, fontWeight: FontWeight.bold, fontSize: 35), // TextStyle

      /// dropdown text,TextField Text
      subtitle1: TextStyle(
          color: Colors.blueGrey, fontSize: 25, fontWeight: FontWeight.bold), // TextStyle
    ), // TextTheme
    iconTheme: const IconThemeData(
      color: Colors.blueGrey,
    ), // IconThemeData
    inputDecorationTheme: const InputDecorationTheme(
      border: OutlineInputBorder(),
      labelStyle: TextStyle(
        color: Colors.blueGrey,
        fontWeight: FontWeight.normal,
      ), // TextStyle
      floatingLabelBehavior: FloatingLabelBehavior.always,
    ), // InputDecorationTheme
    elevatedButtonTheme: ElevatedButtonThemeData(
      style: ElevatedButton.styleFrom(
          primary: Colors.blueGrey,
          onPrimary: Colors.white, // button text color
          textStyle: const TextStyle(
            fontSize: 30,
            fontWeight: FontWeight.bold,
          )), // TextStyle
    ), // ElevatedButtonThemeData
  ); // ThemeData
}
</code></pre><p>And used this theme in Material App as below</p>
<pre tabindex="0"><code>import &#39;package:flutter/material.dart&#39;;
import &#39;package:moneypie/common/app_theme.dart&#39;;
import &#39;package:moneypie/features/net_worth/presentation/screens/add_edit_page.dart&#39;;

/// Starting of the app
class MyApp extends StatelessWidget {
  /// Initializes [key] for subclasses.
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        debugShowCheckedModeBanner: false,
        theme: AppTheme.baseTheme,
        routes: {
          &#39;/&#39;: (_) =&gt; const AddEditPage(),
        },
      ); // MaterialApp
  }
}
</code></pre><h2 id="responsive-ui">Responsive UI</h2>
<p>But the Default themes have the text size hard coded as per the initial test
device I used.To make the app responsive we need to make the text size and the
placement of widgets based on the screen size.For this we need to use
MediaQuery. But MediaQuery can be called only after the Material app and so we
cannot use it with Flutter theme directly.So I decided to use the text scale
factor of MediaQuery.It is the number of font pixels for each logical pixel.For
example, if the text scale factor is 1.5, text will be 50% larger than
the specified font size.So I need to calculate a scale ratio based on the device
screen sizes and base screen sizes for which the font size is hard coded in the
theme file.Then by giving this ratio as text scale factor will make the UI some
what responsive.</p>
<h3 id="calculate-scale-ratio">Calculate Scale ratio.</h3>
<p>So the screen size has two parameters -height,width. So I can get two scale
ratios</p>
<pre tabindex="0"><code>heightScaleRatio =  screenHeight / baseHeight
widthScaleRatio =   screenWidth / baseWidth
</code></pre><p>I decided to use width scale ratio for text sizes as that is what gave a better
responsive look for text.Also since I a planning to create a mobile
application,I decided to keep the maximum value of the ratio as 1 base height
as 700 and base width as 480.I will use the both ratios to position the widgets
in the screen.</p>
<p>So first I created a size config file for this.</p>
<pre tabindex="0"><code>/// Size configuration for responsive screen
class SizeConfig {
  /// Initialaizer
  SizeConfig({required this.screenHeight, required this.screenWidth})
      : heightScaleRatio =
            screenHeight &gt; 700 ? 1 : screenHeight / baseHeight,
        widthScaleRatio =
            screenWidth  &gt; 480 ? 1 : screenWidth / baseWidth;


  ///base height of the screen
  static const double baseHeight = 700;

  /// base width of the width
  static const double baseWidth = 480;

  /// device screen height
  final double screenHeight;

  /// device screen width
  final double screenWidth;

  /// screen height/base height
  final double heightScaleRatio;

  /// screen width/base width
  final double widthScaleRatio;
}
</code></pre><p>Then I create a size config bloc to access the values through out the app</p>
<pre tabindex="0"><code>import &#39;package:bloc/bloc.dart&#39;;
import &#39;package:equatable/equatable.dart&#39;;
import &#39;package:moneypie/common/size_config.dart&#39;;

/// The events which `SizeConfigBloc` will react to.
class SizeConfigEvent extends Equatable {
        /// SizeConfigEvent constructor
        const SizeConfigEvent({required this.screenHeight, required
                this.screenWidth});
  /// device screen height
  final double screenHeight;

  /// device screen width
  final double screenWidth;
  @override
  List&lt;Object&gt; get props =&gt; [screenHeight,screenWidth];
}


/// A `SizeConfigBloc` which handles converting `SizeConfigEvent`s.
class SizeConfigBloc extends Bloc&lt;SizeConfigEvent,SizeConfig &gt; {
  /// The initial state of the `SizeConfigBloc` is 700*480.
  SizeConfigBloc() : super(SizeConfig(screenHeight: 700, screenWidth: 480));

  @override
  Stream&lt;SizeConfig&gt; mapEventToState(SizeConfigEvent event) async* {
          yield SizeConfig(screenHeight: event.screenHeight, screenWidth:
                          event.screenWidth);
    }
  }
</code></pre><p>Now to apply text scale factor throughout the app you can see the example below</p>
<pre tabindex="0"><code>  import &#39;package:moneypie/common/bloc/size_config_bloc.dart&#39;;
  import &#39;package:moneypie/common/size_config.dart&#39;;

  ///Common Page for add and editing entry as the fields
  ///are same
  class AddEditPage extends StatelessWidget {
    /// Key to
    const AddEditPage({Key? key}) : super(key: key);

    @override
    Widget build(BuildContext context) {
      return Scaffold(
        body: SafeArea(
          child: SingleChildScrollView(
              child: BlocBuilder&lt;SizeConfigBloc, SizeConfig&gt;(
                  buildWhen: (previous, current) =&gt;
                      previous.heightScaleRatio != current.heightScaleRatio ||
                      previous.widthScaleRatio != current.widthScaleRatio,
                  builder: (context, state) {
                    // Obtain the current media query information.
                    final mediaQueryData = MediaQuery.of(context);
                    final w = mediaQueryData.size.width;
                    final h = mediaQueryData.size.height;
                    context.read&lt;SizeConfigBloc&gt;().add(
                          SizeConfigEvent(screenHeight: w, screenWidth: h),
                        );
                    return MediaQuery(
                      data: mediaQueryData.copyWith(
                          textScaleFactor: state.widthScaleRatio),
                      child: Column(
                        children: [
                          Row(
                            children: [
                              Expanded(
                                child: IconButton(
                                 onPressed: () =&gt; {print(&#34;pressed&#34;)},
                                  icon: const Icon(
                                    Icons.arrow_back,
                                  ), // Icon
                                ), // IconButton
                              ), // Expanded
                              Expanded(
                                flex: 8,
                                child: Align(
                                  child: Text(
                                    &#39;Add Details&#39;,
                                    style: Theme.of(context).textTheme.bodyText1,
                                  ), // Text
                                ), // Align
                              ), // Expanded
                              Expanded(
                                child: IconButton(
                                 onPressed: () =&gt; {print(&#34;pressed&#34;)},
                                  icon: const Icon(
                                    Icons.add,
                                  ), // Icon
                                ), // IconButton
                              ), // Expanded
                            ],
                          ), // Row
                          Padding(
                            padding: EdgeInsets.fromLTRB(
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                            ), // EdgeInsets.fromLTRB
                            child: _TypeInput(),
                          ), // Padding
                          Padding(
                            padding: EdgeInsets.fromLTRB(
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                            ), // EdgeInsets.fromLTRB
                            child: _CategoryInput(),
                          ), // Padding
                          Padding(
                            padding: EdgeInsets.fromLTRB(
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                            ), // EdgeInsets.fromLTRB
                            child: _DescInput(),
                          ), // Padding
                          Padding(
                            padding: EdgeInsets.fromLTRB(
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                            ), // EdgeInsets.fromLTRB
                            child: _AmountInput(),
                          ), // Padding
                          Padding(
                            padding: EdgeInsets.fromLTRB(
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                              20 * state.widthScaleRatio,
                              20 * state.heightScaleRatio,
                            ), // EdgeInsets.fromLTRB
                            child: _AddButton(),
                          ), // Padding
                        ],
                      ), // Column
                    ); // MediaQuery
                  })), // BlocBuilder
        ), // SafeArea
      ); // Scaffold
    }
  }
</code></pre><p>This might not be the perfect solution and might need to be modified further.But
as of now it suits my needs.Also in future one thing to do to add breakpoints
in case you need to use the UI for mobile ,desktop and web</p>
<p>You can find the youtube video for the above steps below</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/SQRwXSJftwI" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="Flutter theme and responsive UI"></iframe>
</div>



      </main>
    </div>
  </body>
</html>
